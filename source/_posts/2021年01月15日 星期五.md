---
title: 2021年01月15日 星期五
date: 2021-01-15 14:04:06
tags: 周报
updated: 2021-01-15 14:04:11
comments: true
author:  liangpengzhan
---	
周报
一、列表页门店信息接口替换
  1.项目概述
  同一经纪人，列表页门店名称展示与店铺落地页不一致。列表页信息有误。找经纪人列表页获取经纪人信息接口由楼盘字典切换到门店系统，与经纪人店铺页保持一致
  批量给我门店code 批量返回门店名称落兵台：
  http://weapons.ke.com/project/4371/interface/api/667623
  2.详细描述
  1）现状：已上线
  2）本周进度：已上线
  3）下步计划：
  3.数据&&解读
    返回门店名称和门店地址 http://weapons.ke.com/project/4371/interface/api/667623
  4.思考
    1、项目灰度期间如果出现任何500报警都应暂停上线，查找原因，判断是否是灰度时的错误引起  
    2、灰度期间查看applog下所有日志包括error、info、debug和log下的error日志，以便及时发现灰度期间的问题
    3、如果上线回滚完代码报错还是没有停止，应该排查数据类的问题（缓存数据问题和DB数据问题） 
    4、传参的强制类型去掉 
    5、定义redis的key值时避免冲突，不要写相同的数据导致数据写花  
    6、定义空数组需要注意，以免占用多余的内存 

二、门店数据同步
  1.项目概述
	现在门店数据同步前没校验大数据表数据的完整性 容易出问题，门店基础信息和店组 维护小区信息一起同步的依赖大
  2.详细描述
	 1）现状：正在测试
	 2）本周进度：测试完成80%
	 3）下步计划：待上线
  3.数据&&解读
    通过fast统计----获得实时同步的数据量
    每天的3点、6点、9点、12点、15点、18点、21点、24(数据量最大)点同步数据
    最低95万  最高387万(3879361)次请求在24点同步  
    但是线上数据量为
    store_base_info数据量为：65345 
    store_group_info数据量为：81169
    store_main_resblock数据量为：5280646
  4.思考
	如何满足同步任务需求的情况下降低QPS
  需要注意以下四个要点
    1、数据同步、数据兼容、数据回滚
    2、Qa测试环节、最好在测试环境中将线上的数据拉下来
    3、日志记录，要有完备的日志，不需要查询依赖方
    4、7天同步：组对盘表、主营小区表、维护近90天销量字段

下周工作及目标建议聚焦在最重要的5项工作上
1、门店数据同步上线
2、门店数据同步测试环节及时做好数据的兼容和回滚
3、门店报警设置
4、门店接口迁移


下周其他报备事项
需要哪些协同和帮助
需要张伟老师和志斌的相关协同和帮助
周报接收人（夏云、张伟、吴肇恩）
